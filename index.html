<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº§å“ç»ç† Demo æµç¨‹ç»Ÿè®¡ Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-primary: #202123;
            --text-secondary: #6e6e80;
            --border-color: #e5e5e5;
            --card-bg: #ffffff;
            --accent-color: #10a37f;
            --accent-hover: #1a7f64;
            --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.05);
            --radius-md: 8px;
            --radius-lg: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SÃ¶hne', 'ui-sans-serif', 'system-ui', -apple-system, 'Segoe UI', Roboto, Ubuntu, Cantarell, 'Noto Sans', sans-serif, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
            background-color: #f7f7f8;
            color: var(--text-primary);
            padding: 40px 20px 60px 20px;
            min-height: 100vh;
            line-height: 1.5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: transparent;
            padding: 0;
        }

        h1 {
            text-align: center;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 32px;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 40px;
            font-size: 16px;
        }

        /* KPI Cards - Small Tab Style */
        .kpi-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }

        .kpi-card {
            background: var(--card-bg);
            color: var(--text-primary);
            padding: 12px 16px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 80px;
            cursor: default;
        }

        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-color: #d1d1d6;
        }

        .kpi-card:nth-child(n) {
            background: var(--card-bg);
        }

        .kpi-label {
            font-size: 10px;
            color: var(--text-secondary);
            font-weight: 500;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kpi-value {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
            color: var(--text-primary);
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        /* Filters Area */
        .filters {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            flex-wrap: wrap;
            padding: 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            align-items: flex-end;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 10px 36px 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            color: var(--text-primary);
            background: #ffffff;
            transition: border-color 0.2s, box-shadow 0.2s;
            height: 40px;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(16, 163, 127, 0.1);
        }

        .search-box::after {
            content: 'ğŸ”';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            font-size: 14px;
            opacity: 0.5;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .filter-group label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            margin-left: 2px;
        }

        select {
            padding: 0 32px 0 12px;
            height: 40px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            color: var(--text-primary);
            background-color: #fff;
            cursor: pointer;
            min-width: 140px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236e6e80'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
            transition: border-color 0.2s;
        }

        select:focus, select:hover {
            border-color: #8e8ea0;
            outline: none;
        }

        .reset-btn {
            height: 40px;
            padding: 0 20px;
            background: #ffffff;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .reset-btn:hover {
            background: #ececf1;
            border-color: #d9d9e3;
        }

        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        .chart-container {
            background: var(--card-bg);
            padding: 24px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            min-height: 450px;
        }

        .chart-container canvas {
            width: 100%;
            height: auto;
            display: block;
        }

        .chart-container:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-color: #d1d1d6;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 0;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chart-tabs {
            display: flex;
            gap: 4px;
            background: #f7f7f8;
            padding: 4px;
            border-radius: 6px;
        }

        .chart-tab {
            padding: 6px 14px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .chart-tab:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.5);
        }

        .chart-tab.active {
            background: white;
            color: var(--accent-color);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .chart-content-wrapper {
            display: flex;
            gap: 24px;
            height: 480px;
            flex: 1;
        }

        .chart-main {
            flex: 2;
            position: relative;
            height: 100%;
            padding: 10px;
        }

        .chart-canvas {
            display: none !important;
            width: 100% !important;
            height: 100% !important;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.08));
        }

        .chart-canvas.active {
            display: block !important;
        }

        .chart-info-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 24px;
            background: #f9f9fa;
            border-radius: 8px;
            height: 100%;
            overflow-y: auto;
        }

        .info-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .info-item {
            border-bottom: 1px solid #e5e5e5;
            padding-bottom: 16px;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .info-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .info-insight {
            font-size: 14px;
            color: var(--text-primary);
            line-height: 1.6;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid var(--accent-color);
        }

        .custom-legend {
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid #e5e5e5;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 13px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .legend-label {
            flex: 1;
            color: var(--text-primary);
        }

        .legend-value {
            font-weight: 600;
            color: var(--text-secondary);
        }

        /* Table */
        .table-container {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            border-spacing: 0;
            font-size: 14px;
        }

        thead {
            background: #f7f7f8;
            border-bottom: 2px solid #f0f0f0;
        }

        th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: #888;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: background-color 0.2s;
        }

        th:hover {
            background: #ececf1;
            color: var(--text-primary);
        }

        td {
            padding: 12px 16px;
            border-bottom: 1px solid #f7f7f8;
            color: #333;
            transition: background-color 0.2s;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tbody tr {
            transition: background-color 0.2s;
        }

        tbody tr:hover {
            background-color: #f9f9fa;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 0;
            background: none;
            color: inherit;
            font-size: 12px;
            font-weight: 500;
            line-height: 1;
        }

        .status-badge::before {
            content: '';
            display: block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .status-å·²ä¸Šçº¿ {
            color: #0e5a30;
        }

        .status-å·²ä¸Šçº¿::before {
            background-color: #10a37f;
        }

        .status-æµ‹è¯•ä¸­ {
            color: #723b13;
        }

        .status-æµ‹è¯•ä¸­::before {
            background-color: #f5c042;
        }

        .status-å¼€å‘ä¸­ {
            color: #0e4e5e;
        }

        .status-å¼€å‘ä¸­::before {
            background-color: #5436da;
        }

        .status-æäº¤å¼€å‘åˆ†æ”¯è‡³demo {
            color: #444;
        }

        .status-æäº¤å¼€å‘åˆ†æ”¯è‡³demo::before {
            background-color: #9e9e9e;
        }

        .platform-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            background: #ececf1;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* å‘ç‰ˆæ—¥æœŸç­›é€‰å™¨æ ·å¼ */
        .release-date-filter {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding: 16px 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
        }

        .release-date-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }

        .release-date-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .release-date-btn {
            padding: 6px 16px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: #ffffff;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .release-date-btn:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
            background: rgba(16, 163, 127, 0.05);
        }

        .release-date-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .kpi-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
        }

        @media (max-width: 480px) {
            .kpi-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>äº§å“ç»ç† Demo æµç¨‹ç»Ÿè®¡ Dashboard</h1>
        <p class="subtitle">å®æ—¶æ•°æ®å¯è§†åŒ–ä¸åˆ†æ</p>

        <!-- å‘ç‰ˆæ—¥æœŸç­›é€‰å™¨ -->
        <div class="release-date-filter">
            <label class="release-date-label">â–¼ å‘ç‰ˆæ—¥æœŸ:</label>
            <div class="release-date-buttons" id="releaseDateButtons">
                <button class="release-date-btn active" data-date="">å…¨éƒ¨</button>
            </div>
        </div>

        <!-- KPI å¡ç‰‡ -->
        <div class="kpi-cards">
            <div class="kpi-card">
                <div class="kpi-label">æ€»éœ€æ±‚æ•°</div>
                <div class="kpi-value" id="totalReqs">30</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">å·²ä¸Šçº¿</div>
                <div class="kpi-value" id="onlineReqs">25</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">ä¸Šçº¿ç‡</div>
                <div class="kpi-value" id="onlineRate">83%</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">æ¶‰åŠåç«¯</div>
                <div class="kpi-value" id="backendReqs">5</div>
            </div>
        </div>

        <!-- ç­›é€‰å™¨ -->
        <div class="filters">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="æœç´¢éœ€æ±‚åç§°ã€è´Ÿè´£äººã€å¤‡æ³¨ç­‰..." oninput="applySearch()">
            </div>
            <div class="filter-group">
                <label>è´Ÿè´£äºº:</label>
                <select id="filterOwner">
                    <option value="">å…¨éƒ¨</option>
                </select>
            </div>
            <div class="filter-group">
                <label>çŠ¶æ€:</label>
                <select id="filterStatus">
                    <option value="">å…¨éƒ¨</option>
                </select>
            </div>
            <div class="filter-group">
                <label>å¹³å°:</label>
                <select id="filterPlatform">
                    <option value="">å…¨éƒ¨</option>
                </select>
            </div>
            <div class="filter-group">
                <label>æŠ€æœ¯ç±»å‹:</label>
                <select id="filterTech">
                    <option value="">å…¨éƒ¨</option>
                </select>
            </div>
            <button class="reset-btn" onclick="resetFilters()">é‡ç½®ç­›é€‰</button>
        </div>

        <!-- å›¾è¡¨åŒºåŸŸ -->
        <div class="charts-grid">
            <!-- ç»Ÿä¸€å›¾è¡¨å®¹å™¨ï¼ˆå¸¦ 4 ä¸ª Tabï¼‰ -->
            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-title">æ•°æ®ç»Ÿè®¡</div>
                    <div class="chart-tabs">
                        <button class="chart-tab active" data-chart="status">çŠ¶æ€åˆ†å¸ƒ</button>
                        <button class="chart-tab" data-chart="platform">å¹³å°åˆ†å¸ƒ</button>
                        <button class="chart-tab" data-chart="owner">è´Ÿè´£äººå·¥ä½œé‡</button>
                        <button class="chart-tab" data-chart="tech">æŠ€æœ¯ç±»å‹åˆ†å¸ƒ</button>
                    </div>
                </div>
                <div class="chart-content-wrapper">
                    <!-- å·¦ä¾§å›¾è¡¨åŒºåŸŸ -->
                    <div class="chart-main">
                        <canvas id="statusChart" class="chart-canvas active"></canvas>
                        <canvas id="platformChart" class="chart-canvas"></canvas>
                        <canvas id="ownerChart" class="chart-canvas"></canvas>
                        <canvas id="techChart" class="chart-canvas"></canvas>
                    </div>
                    
                    <!-- å³ä¾§ä¿¡æ¯é¢æ¿ -->
                    <div class="chart-info-panel" id="chartInfoPanel">
                        <div class="info-section">
                            <div class="info-item">
                                <div class="info-label">æ€»æ•°</div>
                                <div class="info-value" id="infoTotal">-</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">æœ€é«˜å æ¯”</div>
                                <div class="info-value" id="infoTop">-</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">å…³é”®æ´å¯Ÿ</div>
                                <div class="info-insight" id="infoInsight">-</div>
                            </div>
                        </div>
                        <div class="custom-legend" id="customLegend"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•°æ®è¡¨æ ¼ -->
        <div class="table-container">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">éœ€æ±‚åç§° â†•</th>
                        <th onclick="sortTable(1)">è´Ÿè´£äºº â†•</th>
                        <th onclick="sortTable(2)">å‘ç‰ˆæ—¥æœŸ â†•</th>
                        <th onclick="sortTable(3)">å‘ç‰ˆç±»å‹ â†•</th>
                        <th onclick="sortTable(4)">å¹³å° â†•</th>
                        <th onclick="sortTable(5)">æŠ€æœ¯ç±»å‹ â†•</th>
                        <th onclick="sortTable(6)">å½“å‰çŠ¶æ€ â†•</th>
                        <th onclick="sortTable(7)">æ˜¯å¦æ¶‰åŠåç«¯ â†•</th>
                        <th>å¤‡æ³¨</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // æ³¨å†Œæ•°æ®æ ‡ç­¾æ’ä»¶
        Chart.register(ChartDataLabels);

        // åŸå§‹æ•°æ®
        const rawData = `éœ€æ±‚åç§°,è´Ÿè´£äºº,å‘ç‰ˆæ—¥æœŸ,å‘ç‰ˆç±»å‹,å¹³å°,æŠ€æœ¯ç±»å‹,å½“å‰çŠ¶æ€,æ˜¯å¦æ¶‰åŠåç«¯,å¤‡æ³¨
èŠå¤©å®¤åˆ†ç»„æ ‡ç­¾å±•ç¤ºæ–¹å¼ä¼˜åŒ–,æ€æ€¡,2025/12/9,æå‰,èŠå¤©å®¤,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
ä¼˜åŒ–æŒ‡æ ‡é€‰å¸çš„æ—¶é—´èŒƒå›´,æ€æ€¡,2025-12-25,æå‰,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
ä¼˜åŒ–æŒ‡æ ‡é€‰å¸ç»“æœä¸ä¸€è‡´é—®é¢˜,æ€æ€¡,2025-12-25,æå‰,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
å›æµ‹AIåˆ†æç»“æœä¸å®Œæ•´,æ€æ€¡,2025-12-25,æå‰,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
ä¼˜åŒ–å¹³å°äº¤æ˜“å¯¹ç±»å‹åˆ†ç±»å±•ç¤º,æ€æ€¡,2025-12-25,æå‰,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,æå‰å®Œæˆä½†è¢«pass
3æ—¥æ¶¨å¹…æ¦œç­›é€‰åŒºé—´ï¼ˆiOSï¼‰,æ€æ€¡,2026-01-15,æ­£å¸¸,iOS,å‰ç«¯+åç«¯ååŠ©+æ•°æ®ç»Ÿè®¡,å·²ä¸Šçº¿,æ˜¯,
3æ—¥æ¶¨å¹…æ¦œç­›é€‰åŒºé—´ï¼ˆAndroidï¼‰,æ€æ€¡,2026-01-15,æ­£å¸¸,Android,å‰ç«¯+åç«¯ååŠ©+æ•°æ®ç»Ÿè®¡,å·²ä¸Šçº¿,æ˜¯,
3æ—¥æ¶¨å¹…æ¦œç­›é€‰åŒºé—´ï¼ˆPCï¼‰,æ€æ€¡,2026-01-22,æ­£å¸¸,PC,å‰ç«¯+åç«¯ååŠ©+æ•°æ®ç»Ÿè®¡,å·²ä¸Šçº¿,æ˜¯,
ç¾¤èŠè‡ªåŠ¨è·³è½¬ä¼˜åŒ–,æ€æ€¡,2026-01-22,æ­£å¸¸,èŠå¤©å®¤,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
èŠå¤©å®¤å³é”®ç²˜å¸–åŠŸèƒ½,æ€æ€¡,2026-01-22,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
ç­›é€‰å™¨æ¶¨è·Œå¹…æ¡ä»¶,æ€æ€¡,2026-01-22,æ­£å¸¸,PC,å‰ç«¯+åç«¯,å¼€å‘ä¸­,æ˜¯,
èŠå¤©å®¤ç¾¤ç»„æ·»åŠ å¥½å‹,æ€æ€¡,2026-01-22,æ­£å¸¸,PC,çº¯å‰ç«¯,å¼€å‘ä¸­,å¦,
å¿«è®¯å†å²è„‰ç»œ Demo,æ€æ€¡,2026-01-22,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,è‡ªå·±çš„idea->å®ç°
å¤§ä¿ƒé¡µé¢ç§»åŠ¨ç«¯é€‚é…,æ–‡è½©,2026-01-04,æ­£å¸¸,Web,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
Aceæ™ºæœä¼˜åŒ–,æ–‡è½©,2025-12-08,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
Kçº¿è§£è¯»åŠŸèƒ½ Demo,æ–‡è½©,2026-01-04,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,è‡ªå·±çš„idea->å®ç°
åˆçº¦æ æ†è¾“å…¥æ¡†æ¸…ç©ºé—®é¢˜,æ·‘å©·,2025-12-25,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
ç™»å½•è®¾å¤‡ç®¡ç†H5-ç§»é™¤è®¾å¤‡,æ·‘å©·,2026-01-15,æ­£å¸¸,Web,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
å®‰å…¨è®¾ç½®H5 logoä¼˜åŒ–,æ·‘å©·,2026-01-15,æ­£å¸¸,Web,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
è‡ªå®šä¹‰æŒ‡æ ‡å§”æ‰˜ä»·æ ¼undefined,æ·‘å©·,2026-01-22,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
è‡ªå®šä¹‰æŒ‡æ ‡å®ç›˜æ–¹å‘æ˜¾ç¤ºé—®é¢˜,æ·‘å©·,2026-01-22,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
ä½œå®¶ç”³è¯·å…¥é©»å¤œé—´æ¨¡å¼å­—ä½“,å½±å½±,2026-01-15,æå‰,Web,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
æŠ•ç¨¿é¡µé¢è”ç³»æ–¹å¼ä¸å°é¢å›¾,å½±å½±,2026-01-15,æ­£å¸¸,Web,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
ä¿¡å·é¢„è­¦é¢‘ç‡é€‰é¡¹,å½±å½±,2026-01-15,æ­£å¸¸,Android,å‰ç«¯+åç«¯ååŠ©,å·²ä¸Šçº¿,æ˜¯,
ç”»çº¿å·¥å…·è®¾ç½®çª—å£ä¼˜åŒ–,æ€ç¿,2026-01-15,æ­£å¸¸,PC,çº¯å‰ç«¯,æäº¤å¼€å‘åˆ†æ”¯è‡³demo,å¦,
ç”»çº¿ç®¡ç†ä¼šå‘˜å¼¹çª—ä¼˜åŒ–,æ€ç¿,2026-01-15,æ­£å¸¸,PC,çº¯å‰ç«¯,æäº¤å¼€å‘åˆ†æ”¯è‡³demo,å¦,
ç”»çº¿ç®¡ç†ç­›é€‰ä¼˜åŒ–,æ€ç¿,2026-01-15,æ­£å¸¸,PC,çº¯å‰ç«¯,æäº¤å¼€å‘åˆ†æ”¯è‡³demo,å¦,
DCA/ç½‘æ ¼ç­–ç•¥æ€»è§ˆé¡µ,æ³‰ç§€,2025/12/9,æ­£å¸¸,PC,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,åŸæŠ€æœ¯ç¦»èŒåæ”¹ä¸ºäº§å“ demoæµç¨‹
æŒä»“é‡æŒ‡æ ‡è‹±æ–‡åç§°æ”¹ä¸º OI,æ³‰ç§€,2026-01-15,æ­£å¸¸,Android,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,
æŒä»“é‡æŒ‡æ ‡è‹±æ–‡åç§°æ”¹ä¸º OI,æ³‰ç§€,2026-01-15,æ­£å¸¸,iOS,çº¯å‰ç«¯,å·²ä¸Šçº¿,å¦,`;

        // è§£æ CSV æ•°æ®
        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const headers = lines[0].split(',');
            const data = [];
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const obj = {};
                headers.forEach((header, index) => {
                    obj[header] = values[index] || '';
                });
                data.push(obj);
            }
            return data;
        }

        let allData = parseCSV(rawData);
        let filteredData = [...allData];
        let sortColumn = -1;
        let sortDirection = 1;

        // æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤ºï¼ˆå°† 2025-12-25 æ˜¾ç¤ºä¸º 12.25ï¼‰
        function formatReleaseDate(dateStr) {
            if (!dateStr) return 'å…¨éƒ¨';
            // å¤„ç†ä¸åŒæ ¼å¼çš„æ—¥æœŸï¼š2025/12/9, 2025-12-25, 2026-01-15 ç­‰
            // å…ˆå°è¯•æ ‡å‡†åŒ–æ—¥æœŸæ ¼å¼
            let normalizedDate = dateStr.replace(/\//g, '-');
            
            // å°è¯•è§£ææ—¥æœŸ
            const date = new Date(normalizedDate);
            if (!isNaN(date.getTime())) {
                const month = date.getMonth() + 1;
                const day = date.getDate();
                return `${month}.${day}`;
            }
            
            // å¦‚æœæ— æ³•è§£æï¼Œå°è¯•ç›´æ¥æå–æœˆä»½å’Œæ—¥æœŸï¼ˆæ ¼å¼å¦‚ 2025/12/9ï¼‰
            const match = dateStr.match(/(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})/);
            if (match) {
                return `${parseInt(match[2])}.${parseInt(match[3])}`;
            }
            
            // å¦‚æœéƒ½ä¸è¡Œï¼Œè¿”å›åŸå€¼
            return dateStr;
        }

        // åˆå§‹åŒ–å‘ç‰ˆæ—¥æœŸç­›é€‰å™¨
        function initReleaseDateFilter() {
            // æå–æ‰€æœ‰å”¯ä¸€çš„å‘ç‰ˆæ—¥æœŸ
            const releaseDates = [...new Set(allData.map(d => d.å‘ç‰ˆæ—¥æœŸ))].filter(d => d).sort();
            
            const buttonsContainer = document.getElementById('releaseDateButtons');
            
            // æ·»åŠ æ—¥æœŸæŒ‰é’®
            releaseDates.forEach(date => {
                const button = document.createElement('button');
                button.className = 'release-date-btn';
                button.textContent = formatReleaseDate(date);
                button.setAttribute('data-date', date);
                button.addEventListener('click', () => selectReleaseDate(date));
                buttonsContainer.appendChild(button);
            });
        }

        // é€‰æ‹©å‘ç‰ˆæ—¥æœŸ
        function selectReleaseDate(date) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.release-date-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-date') === date) {
                    btn.classList.add('active');
                }
            });
            
            // åº”ç”¨ç­›é€‰
            applyFilters();
        }

        // åˆå§‹åŒ–ç­›é€‰å™¨é€‰é¡¹
        function initFilters() {
            const owners = [...new Set(allData.map(d => d.è´Ÿè´£äºº))];
            const statuses = [...new Set(allData.map(d => d.å½“å‰çŠ¶æ€))];
            const platforms = [...new Set(allData.map(d => d.å¹³å°))];
            const techs = [...new Set(allData.map(d => d.æŠ€æœ¯ç±»å‹))];

            populateSelect('filterOwner', owners);
            populateSelect('filterStatus', statuses);
            populateSelect('filterPlatform', platforms);
            populateSelect('filterTech', techs);

            document.getElementById('filterOwner').addEventListener('change', applyFilters);
            document.getElementById('filterStatus').addEventListener('change', applyFilters);
            document.getElementById('filterPlatform').addEventListener('change', applyFilters);
            document.getElementById('filterTech').addEventListener('change', applyFilters);

            // åˆå§‹åŒ–å‘ç‰ˆæ—¥æœŸç­›é€‰å™¨
            initReleaseDateFilter();
        }

        function populateSelect(id, options) {
            const select = document.getElementById(id);
            options.forEach(opt => {
                const option = document.createElement('option');
                option.value = opt;
                option.textContent = opt;
                select.appendChild(option);
            });
        }

        // æœç´¢åŠŸèƒ½
        function applySearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            // è·å–å‘ç‰ˆæ—¥æœŸç­›é€‰
            const activeDateBtn = document.querySelector('.release-date-btn.active');
            const releaseDate = activeDateBtn ? activeDateBtn.getAttribute('data-date') : '';
            
            const owner = document.getElementById('filterOwner').value;
            const status = document.getElementById('filterStatus').value;
            const platform = document.getElementById('filterPlatform').value;
            const tech = document.getElementById('filterTech').value;

            let data = allData.filter(item => {
                return (!releaseDate || item.å‘ç‰ˆæ—¥æœŸ === releaseDate) &&
                       (!owner || item.è´Ÿè´£äºº === owner) &&
                       (!status || item.å½“å‰çŠ¶æ€ === status) &&
                       (!platform || item.å¹³å° === platform) &&
                       (!tech || item.æŠ€æœ¯ç±»å‹ === tech);
            });

            if (searchTerm) {
                data = data.filter(item => {
                    return Object.values(item).some(value => 
                        value && value.toString().toLowerCase().includes(searchTerm)
                    );
                });
            }

            filteredData = data;
            updateDashboard();
        }

        // åº”ç”¨ç­›é€‰
        function applyFilters() {
            applySearch();
        }

        // é‡ç½®ç­›é€‰
        function resetFilters() {
            document.getElementById('filterOwner').value = '';
            document.getElementById('filterStatus').value = '';
            document.getElementById('filterPlatform').value = '';
            document.getElementById('filterTech').value = '';
            document.getElementById('searchInput').value = '';
            
            // é‡ç½®å‘ç‰ˆæ—¥æœŸç­›é€‰
            selectReleaseDate('');
            
            filteredData = [...allData];
            updateDashboard();
        }

        // æ’åºè¡¨æ ¼
        function sortTable(columnIndex) {
            if (sortColumn === columnIndex) {
                sortDirection *= -1;
            } else {
                sortColumn = columnIndex;
                sortDirection = 1;
            }

            const headers = ['éœ€æ±‚åç§°', 'è´Ÿè´£äºº', 'å‘ç‰ˆæ—¥æœŸ', 'å‘ç‰ˆç±»å‹', 'å¹³å°', 'æŠ€æœ¯ç±»å‹', 'å½“å‰çŠ¶æ€', 'æ˜¯å¦æ¶‰åŠåç«¯', 'å¤‡æ³¨'];
            const key = headers[columnIndex];

            filteredData.sort((a, b) => {
                const valA = a[key] || '';
                const valB = b[key] || '';
                return valA.localeCompare(valB, 'zh-CN') * sortDirection;
            });

            renderTable();
        }

        // æ¸²æŸ“è¡¨æ ¼
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            filteredData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.éœ€æ±‚åç§°}</td>
                    <td>${item.è´Ÿè´£äºº}</td>
                    <td>${item.å‘ç‰ˆæ—¥æœŸ}</td>
                    <td>${item.å‘ç‰ˆç±»å‹}</td>
                    <td><span class="platform-badge">${item.å¹³å°}</span></td>
                    <td>${item.æŠ€æœ¯ç±»å‹}</td>
                    <td><span class="status-badge status-${item.å½“å‰çŠ¶æ€}">${item.å½“å‰çŠ¶æ€}</span></td>
                    <td>${item.æ˜¯å¦æ¶‰åŠåç«¯}</td>
                    <td>${item.å¤‡æ³¨ || '-'}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // æ›´æ–° KPI
        function updateKPI() {
            const total = filteredData.length;
            const online = filteredData.filter(d => d.å½“å‰çŠ¶æ€ === 'å·²ä¸Šçº¿').length;
            const rate = total > 0 ? Math.round((online / total) * 100) : 0;
            const backend = filteredData.filter(d => d.æ˜¯å¦æ¶‰åŠåç«¯ === 'æ˜¯').length;

            document.getElementById('totalReqs').textContent = total;
            document.getElementById('onlineReqs').textContent = online;
            document.getElementById('onlineRate').textContent = rate + '%';
            document.getElementById('backendReqs').textContent = backend;
        }

        // æ›´æ–°å›¾è¡¨
        let statusChart, ownerChart, platformChart, techChart;

        function updateCharts() {
            // è«å…°è¿ªç»¿è‰²é…è‰²æ–¹æ¡ˆ
            const colors = ['#F6F0D7', '#C5D89D', '#9CAB84', '#89986D'];
            const extendedColors = ['#F6F0D7', '#C5D89D', '#9CAB84', '#89986D', '#E0E5B6', '#7A855F'];

            // çŠ¶æ€åˆ†å¸ƒ
            const statusCount = {};
            filteredData.forEach(d => {
                statusCount[d.å½“å‰çŠ¶æ€] = (statusCount[d.å½“å‰çŠ¶æ€] || 0) + 1;
            });

            const statusValues = Object.values(statusCount);
            const statusTotal = statusValues.reduce((a, b) => a + b, 0);
            const statusLabels = Object.keys(statusCount).map((key, index) => {
                const value = statusValues[index];
                const percentage = statusTotal > 0 ? Math.round((value / statusTotal) * 100) : 0;
                return `${key} (${percentage}%)`;
            });

            if (statusChart) statusChart.destroy();
            statusChart = new Chart(document.getElementById('statusChart'), {
                type: 'doughnut',
                data: {
                    labels: statusLabels,
                    datasets: [{
                        data: statusValues,
                        backgroundColor: colors,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    height: 480,
                    radius: '75%',
                    cutout: '60%',
                    plugins: {
                        legend: { 
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#202123',
                            titleFont: { family: "'SÃ¶hne', sans-serif" },
                            bodyFont: { family: "'SÃ¶hne', sans-serif" },
                            padding: 12,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                    return label.replace(/ \(\d+%\)/, '') + ': ' + value + ' (' + percentage + '%)';
                                }
                            }
                        },
                        datalabels: {
                            color: function(context) {
                                const index = context.dataIndex;
                                return index === 0 ? '#333' : '#fff';
                            },
                            font: {
                                weight: 'bold',
                                size: 12,
                                family: "'SÃ¶hne', sans-serif"
                            },
                            formatter: function(value, context) {
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                return percentage > 5 ? percentage + '%' : '';
                            }
                        }
                    }
                }
            });

            // è´Ÿè´£äººå·¥ä½œé‡
            const ownerCount = {};
            filteredData.forEach(d => {
                ownerCount[d.è´Ÿè´£äºº] = (ownerCount[d.è´Ÿè´£äºº] || 0) + 1;
            });

            const ownerKeys = Object.keys(ownerCount);
            const ownerValues = Object.values(ownerCount);
            const ownerTotal = ownerValues.reduce((a, b) => a + b, 0);

            // ä¸ºæ¯ä¸ªè´Ÿè´£äººåˆ†é…ä¸åŒæ·±åº¦çš„ç»¿è‰²
            const ownerColors = [
                '#9CAB84', '#89986D', '#7A855F', '#C5D89D', '#E0E5B6', '#F6F0D7'
            ];
            const ownerBackgroundColors = ownerKeys.map((key, index) => {
                return ownerColors[index % ownerColors.length];
            });

            if (ownerChart) ownerChart.destroy();
            ownerChart = new Chart(document.getElementById('ownerChart'), {
                type: 'bar',
                data: {
                    labels: ownerKeys,
                    datasets: [{
                        label: 'éœ€æ±‚æ•°é‡',
                        data: ownerValues,
                        backgroundColor: ownerBackgroundColors,
                        borderRadius: 8,
                        borderSkipped: false,
                        barThickness: 38
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    height: 480,
                    layout: {
                        padding: {
                            left: 5,
                            right: 20,
                            top: 10,
                            bottom: 10
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#202123',
                            titleFont: { family: "'SÃ¶hne', sans-serif", size: 14 },
                            bodyFont: { family: "'SÃ¶hne', sans-serif", size: 13 },
                            padding: 14,
                            cornerRadius: 8,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.y;
                                    return `${value} é¡¹`;
                                }
                            }
                        },
                        datalabels: {
                            display: false
                        }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true, 
                            ticks: { 
                                stepSize: 1, 
                                font: { family: "'SÃ¶hne', sans-serif", size: 10 },
                                padding: 4
                            },
                            grid: { 
                                display: false,
                                drawBorder: false
                            },
                            border: { display: false }
                        },
                        x: {
                            ticks: { 
                                font: { family: "'SÃ¶hne', sans-serif", size: 13 },
                                padding: 12
                            },
                            grid: { 
                                display: false,
                                drawBorder: false
                            },
                            border: { display: false }
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // å¹³å°åˆ†å¸ƒ
            const platformCount = {};
            filteredData.forEach(d => {
                platformCount[d.å¹³å°] = (platformCount[d.å¹³å°] || 0) + 1;
            });

            const platformValues = Object.values(platformCount);
            const platformTotal = platformValues.reduce((a, b) => a + b, 0);
            const platformLabels = Object.keys(platformCount).map((key, index) => {
                const value = platformValues[index];
                const percentage = platformTotal > 0 ? Math.round((value / platformTotal) * 100) : 0;
                return `${key} (${percentage}%)`;
            });

            if (platformChart) platformChart.destroy();
            platformChart = new Chart(document.getElementById('platformChart'), {
                type: 'pie',
                data: {
                    labels: platformLabels,
                    datasets: [{
                        data: platformValues,
                        backgroundColor: extendedColors,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    height: 480,
                    radius: '75%',
                    plugins: {
                        legend: { 
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#202123',
                            titleFont: { family: "'SÃ¶hne', sans-serif" },
                            bodyFont: { family: "'SÃ¶hne', sans-serif" },
                            padding: 12,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                    return label.replace(/ \(\d+%\)/, '') + ': ' + value + ' (' + percentage + '%)';
                                }
                            }
                        },
                        datalabels: {
                            color: function(context) {
                                const index = context.dataIndex;
                                return (index === 0 || index === 4) ? '#333' : '#fff';
                            },
                            font: {
                                weight: 'bold',
                                size: 12,
                                family: "'SÃ¶hne', sans-serif"
                            },
                            formatter: function(value, context) {
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                return percentage > 5 ? percentage + '%' : '';
                            }
                        }
                    }
                }
            });

            // æŠ€æœ¯ç±»å‹åˆ†å¸ƒ
            const techCount = {};
            filteredData.forEach(d => {
                techCount[d.æŠ€æœ¯ç±»å‹] = (techCount[d.æŠ€æœ¯ç±»å‹] || 0) + 1;
            });

            const techKeys = Object.keys(techCount);
            const techValues = Object.values(techCount);
            const techTotal = techValues.reduce((a, b) => a + b, 0);

            // åˆ›å»ºä¸åŒé¢œè‰²çš„æ•°ç»„ï¼ˆä½¿ç”¨ Morandi è‰²ç³»ï¼‰
            const techColors = [
                '#C5D89D', // çº¯å‰ç«¯ - æµ…ç»¿è‰²
                '#9CAB84', // å‰ç«¯+åç«¯ååŠ©+æ•°æ®ç»Ÿè®¡ - æ©„æ¦„ç»¿
                '#E0E5B6', // å‰ç«¯+åç«¯ - æµ…é»„ç»¿
                '#89986D'  // å‰ç«¯+åç«¯ååŠ© - æ·±ç»¿
            ];

            // ä¸ºæ¯ä¸ªæŸ±å­åˆ†é…é¢œè‰²
            const techBackgroundColors = techKeys.map((key, index) => {
                return techColors[index % techColors.length];
            });

            if (techChart) techChart.destroy();
            techChart = new Chart(document.getElementById('techChart'), {
                type: 'bar',
                data: {
                    labels: techKeys,
                    datasets: [{
                        label: 'æ•°é‡',
                        data: techValues,
                        backgroundColor: techBackgroundColors,
                        borderRadius: 8,
                        borderSkipped: false,
                        barThickness: 38
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    height: 480,
                    indexAxis: 'y',
                    layout: {
                        padding: {
                            left: 10,
                            right: 20,
                            top: 10,
                            bottom: 5
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#202123',
                            titleFont: { family: "'SÃ¶hne', sans-serif", size: 14 },
                            bodyFont: { family: "'SÃ¶hne', sans-serif", size: 13 },
                            padding: 14,
                            cornerRadius: 8,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed.x;
                                    return `${value} é¡¹`;
                                }
                            }
                        },
                        datalabels: {
                            display: false
                        }
                    },
                    scales: {
                        x: { 
                            beginAtZero: true, 
                            ticks: { 
                                stepSize: 2, 
                                font: { family: "'SÃ¶hne', sans-serif", size: 10 },
                                maxRotation: 0,
                                minRotation: 0,
                                padding: 4
                            },
                            grid: { 
                                display: false,
                                drawBorder: false
                            },
                            border: { display: false }
                        },
                        y: {
                            ticks: { 
                                font: { family: "'SÃ¶hne', sans-serif", size: 13 },
                                padding: 12
                            },
                            grid: { 
                                display: false,
                                drawBorder: false
                            },
                            border: { display: false }
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // ç¡®ä¿é»˜è®¤æ˜¾ç¤ºæ­£ç¡®çš„å›¾è¡¨ï¼Œå¹¶éšè—å…¶ä»–å›¾è¡¨
            const statusCanvas = document.getElementById('statusChart');
            const platformCanvas = document.getElementById('platformChart');
            const ownerCanvas = document.getElementById('ownerChart');
            const techCanvas = document.getElementById('techChart');

            // åˆå§‹åŒ–æ—¶ï¼Œç¡®ä¿æ‰€æœ‰å›¾è¡¨éƒ½æœ‰æ­£ç¡®çš„ç±»
            // ç»Ÿä¸€å®¹å™¨ï¼šé»˜è®¤åªæ˜¾ç¤ºçŠ¶æ€åˆ†å¸ƒ
            statusCanvas.classList.add('active');
            platformCanvas.classList.remove('active');
            ownerCanvas.classList.remove('active');
            techCanvas.classList.remove('active');
            
            // è®¾ç½®é»˜è®¤æ¿€æ´»çš„ Tab
            document.querySelectorAll('.chart-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector('.chart-tab[data-chart="status"]').classList.add('active');
            
            // åˆå§‹åŒ–å³ä¾§ä¿¡æ¯é¢æ¿
            updateChartInfo('status');
        }

        // Tab åˆ‡æ¢åŠŸèƒ½ - ç»Ÿä¸€å¤„ç†4ä¸ªå›¾è¡¨
        function initChartTabs() {
            // æ‰€æœ‰ Tab åˆ‡æ¢
            document.querySelectorAll('.chart-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const chartType = this.getAttribute('data-chart');
                    
                    // æ›´æ–°æ‰€æœ‰ Tab çŠ¶æ€
                    const container = this.closest('.chart-container');
                    container.querySelectorAll('.chart-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // éšè—æ‰€æœ‰å›¾è¡¨
                    const statusCanvas = document.getElementById('statusChart');
                    const platformCanvas = document.getElementById('platformChart');
                    const ownerCanvas = document.getElementById('ownerChart');
                    const techCanvas = document.getElementById('techChart');
                    
                    statusCanvas.classList.remove('active');
                    platformCanvas.classList.remove('active');
                    ownerCanvas.classList.remove('active');
                    techCanvas.classList.remove('active');
                    
                    // æ˜¾ç¤ºé€‰ä¸­çš„å›¾è¡¨
                    let activeChart = null;
                    if (chartType === 'status') {
                        statusCanvas.classList.add('active');
                        activeChart = statusChart;
                    } else if (chartType === 'platform') {
                        platformCanvas.classList.add('active');
                        activeChart = platformChart;
                    } else if (chartType === 'owner') {
                        ownerCanvas.classList.add('active');
                        activeChart = ownerChart;
                    } else if (chartType === 'tech') {
                        techCanvas.classList.add('active');
                        activeChart = techChart;
                    }
                    
                    // æ›´æ–°å³ä¾§ä¿¡æ¯é¢æ¿
                    updateChartInfo(chartType);
                    
                    // ä½¿ç”¨ requestAnimationFrame ç¡®ä¿ DOM æ›´æ–°åå†è°ƒæ•´å›¾è¡¨å¤§å°
                    requestAnimationFrame(() => {
                        if (activeChart) {
                            activeChart.resize();
                        }
                    });
                });
            });
        }

        // æ›´æ–°å³ä¾§ä¿¡æ¯é¢æ¿
        function updateChartInfo(chartType) {
            const infoTotal = document.getElementById('infoTotal');
            const infoTop = document.getElementById('infoTop');
            const infoInsight = document.getElementById('infoInsight');
            const customLegend = document.getElementById('customLegend');

            if (chartType === 'status') {
                // çŠ¶æ€åˆ†å¸ƒä¿¡æ¯
                const statusCount = {};
                filteredData.forEach(d => {
                    statusCount[d.å½“å‰çŠ¶æ€] = (statusCount[d.å½“å‰çŠ¶æ€] || 0) + 1;
                });
                const total = filteredData.length;
                const sorted = Object.entries(statusCount).sort((a, b) => b[1] - a[1]);
                const topStatus = sorted[0];
                const topPercentage = Math.round((topStatus[1] / total) * 100);

                infoTotal.textContent = total;
                infoTop.textContent = `${topStatus[0]} (${topPercentage}%)`;
                
                const onlineCount = statusCount['å·²ä¸Šçº¿'] || 0;
                const onlineRate = Math.round((onlineCount / total) * 100);
                infoInsight.textContent = `å½“å‰ä¸Šçº¿ç‡ä¸º ${onlineRate}%ï¼Œ${onlineRate >= 80 ? 'è¡¨ç°ä¼˜ç§€' : onlineRate >= 60 ? 'è¡¨ç°è‰¯å¥½' : 'éœ€è¦å…³æ³¨'}ã€‚`;

                // è‡ªå®šä¹‰å›¾ä¾‹
                customLegend.innerHTML = sorted.map(([label, count]) => {
                    const percentage = Math.round((count / total) * 100);
                    const colors = ['#F6F0D7', '#C5D89D', '#9CAB84', '#89986D'];
                    const colorIndex = sorted.findIndex(([l]) => l === label);
                    return `
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: ${colors[colorIndex % colors.length]}"></div>
                            <div class="legend-label">${label}</div>
                            <div class="legend-value">${count} (${percentage}%)</div>
                        </div>
                    `;
                }).join('');

            } else if (chartType === 'platform') {
                // å¹³å°åˆ†å¸ƒä¿¡æ¯
                const platformCount = {};
                filteredData.forEach(d => {
                    platformCount[d.å¹³å°] = (platformCount[d.å¹³å°] || 0) + 1;
                });
                const total = filteredData.length;
                const sorted = Object.entries(platformCount).sort((a, b) => b[1] - a[1]);
                const topPlatform = sorted[0];
                const topPercentage = Math.round((topPlatform[1] / total) * 100);

                infoTotal.textContent = total;
                infoTop.textContent = `${topPlatform[0]} (${topPercentage}%)`;
                
                const pcCount = platformCount['PC'] || 0;
                const pcRate = Math.round((pcCount / total) * 100);
                infoInsight.textContent = `PC ç«¯éœ€æ±‚å æ¯” ${pcRate}%ï¼Œ${pcRate >= 50 ? 'æ˜¯ä¸»è¦å¹³å°' : 'ä¸å…¶ä»–å¹³å°åˆ†å¸ƒç›¸å¯¹å‡è¡¡'}ã€‚`;

                // è‡ªå®šä¹‰å›¾ä¾‹
                const extendedColors = ['#F6F0D7', '#C5D89D', '#9CAB84', '#89986D', '#E0E5B6', '#7A855F'];
                customLegend.innerHTML = sorted.map(([label, count], index) => {
                    const percentage = Math.round((count / total) * 100);
                    return `
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: ${extendedColors[index % extendedColors.length]}"></div>
                            <div class="legend-label">${label}</div>
                            <div class="legend-value">${count} (${percentage}%)</div>
                        </div>
                    `;
                }).join('');

            } else if (chartType === 'owner') {
                // è´Ÿè´£äººå·¥ä½œé‡ä¿¡æ¯
                const ownerCount = {};
                filteredData.forEach(d => {
                    ownerCount[d.è´Ÿè´£äºº] = (ownerCount[d.è´Ÿè´£äºº] || 0) + 1;
                });
                const sorted = Object.entries(ownerCount).sort((a, b) => b[1] - a[1]);
                const topOwner = sorted[0];
                const avgWorkload = Math.round(Object.values(ownerCount).reduce((a, b) => a + b, 0) / Object.keys(ownerCount).length);

                infoTotal.textContent = Object.keys(ownerCount).length;
                infoTop.textContent = `${topOwner[0]} (${topOwner[1]} é¡¹)`;
                
                const maxWorkload = Math.max(...Object.values(ownerCount));
                const minWorkload = Math.min(...Object.values(ownerCount));
                infoInsight.textContent = `å·¥ä½œé‡åˆ†å¸ƒ${maxWorkload - minWorkload <= 3 ? 'ç›¸å¯¹å‡è¡¡' : 'å­˜åœ¨å·®å¼‚'}ï¼Œæœ€é«˜ ${maxWorkload} é¡¹ï¼Œæœ€ä½ ${minWorkload} é¡¹ï¼Œå¹³å‡ ${avgWorkload} é¡¹ã€‚`;

                // è‡ªå®šä¹‰å›¾ä¾‹
                customLegend.innerHTML = sorted.map(([label, count]) => {
                    return `
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #9CAB84"></div>
                            <div class="legend-label">${label}</div>
                            <div class="legend-value">${count} é¡¹</div>
                        </div>
                    `;
                }).join('');

            } else if (chartType === 'tech') {
                // æŠ€æœ¯ç±»å‹åˆ†å¸ƒä¿¡æ¯
                const techCount = {};
                filteredData.forEach(d => {
                    techCount[d.æŠ€æœ¯ç±»å‹] = (techCount[d.æŠ€æœ¯ç±»å‹] || 0) + 1;
                });
                const total = filteredData.length;
                const sorted = Object.entries(techCount).sort((a, b) => b[1] - a[1]);
                const topTech = sorted[0];
                const topPercentage = Math.round((topTech[1] / total) * 100);

                infoTotal.textContent = total;
                infoTop.textContent = `${topTech[0]} (${topPercentage}%)`;
                
                const pureFrontendCount = techCount['çº¯å‰ç«¯'] || 0;
                const pureFrontendRate = Math.round((pureFrontendCount / total) * 100);
                const backendInvolved = total - pureFrontendCount;
                const backendRate = Math.round((backendInvolved / total) * 100);
                infoInsight.textContent = `çº¯å‰ç«¯éœ€æ±‚å æ¯” ${pureFrontendRate}%ï¼Œ${backendRate > 0 ? `æ¶‰åŠåç«¯åä½œçš„éœ€æ±‚å  ${backendRate}%` : 'æ— åç«¯åä½œéœ€æ±‚'}ã€‚`;

                // è‡ªå®šä¹‰å›¾ä¾‹
                customLegend.innerHTML = sorted.map(([label, count]) => {
                    const percentage = Math.round((count / total) * 100);
                    return `
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #C5D89D"></div>
                            <div class="legend-label">${label}</div>
                            <div class="legend-value">${count} (${percentage}%)</div>
                        </div>
                    `;
                }).join('');
            }
        }

        // æ›´æ–°æ•´ä¸ª Dashboard
        function updateDashboard() {
            updateKPI();
            updateCharts();
            renderTable();
            
            // æ›´æ–°å³ä¾§ä¿¡æ¯é¢æ¿ï¼ˆæ ¹æ®å½“å‰æ¿€æ´»çš„å›¾è¡¨ï¼‰
            const activeTab = document.querySelector('.chart-tab.active');
            if (activeTab) {
                const chartType = activeTab.getAttribute('data-chart');
                updateChartInfo(chartType);
            }
        }

        // åˆå§‹åŒ–
        initFilters();
        initChartTabs();
        updateDashboard();
    </script>
</body>
</html>

